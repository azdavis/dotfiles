#!/usr/bin/env zsh

source "$HOME/.config/misc/base.sh" || exit 1

echo -n 'hostname: ' && read host_name

sudo -v
sudo scutil --set ComputerName "$host_name"
sudo scutil --set HostName "$host_name"
sudo scutil --set LocalHostName "$host_name"
sudo defaults write \
  '/Library/Preferences/safe_systemConfiguration/com.apple.smb.server' \
  NetBIOSName -string "$host_name"
sudo dscacheutil -flushcache
