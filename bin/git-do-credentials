#!/usr/bin/env sh

. "$HOME/.config/etc/base.sh"

username="$(git config --global user.name)"
[ -z "$username" ] && abort "no git user.name found"

printf "github token: "
read -s github

git credential-osxkeychain erase <<EOS
host=github.com
protocol=https
EOS

git credential-osxkeychain store <<EOS
host=github.com
protocol=https
password=$github
username=$username
EOS

echo "stored"

printf "gitlab password: "
read -s gitlab

git credential-osxkeychain erase <<EOS
host=gitlab.com
protocol=https
EOS

git credential-osxkeychain store <<EOS
host=gitlab.com
protocol=https
password=$gitlab
username=$username
EOS

echo "stored"
