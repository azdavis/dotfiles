#!/bin/sh -eu

. ~/.config/lib/cmd_found.sh
. ~/.config/lib/force_symlink.sh
. ~/.config/lib/panic.sh

if [ $# -ne 0 ]; then
	panic "usage: $(basename "$0")"
fi

if ! cmd_found subl; then
	echo "'subl' not found"
	exit
fi

config_subl=~/.config/sublime-text-3
force_symlink "$config_subl" ~/"Library/Application Support/Sublime Text 3"
rm -rf \
	"$config_subl/Backup" \
	"$config_subl/Cache" \
	"$config_subl/Index" \
	"$config_subl/Local/Auto Save Session.sublime_session" \
	"$config_subl/Local/Session.sublime_session" \
	"$config_subl/Packages/User/oscrypto-ca-bundle.crt" \
	"$config_subl/Packages/User/Package Control.cache" \
	"$config_subl/Packages/User/Package Control.last-run" \
	"$config_subl/Packages/User/Package Control.merged-ca-bundle" \
	"$config_subl/Packages/User/Package Control.user-ca-bundle"
