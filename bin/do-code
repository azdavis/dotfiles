#!/bin/sh

set -efu
IFS=

. $HOME/.config/lib/cmd_found.sh
. $HOME/.config/lib/panic.sh
. $HOME/.config/lib/symlink.sh

if [ $# -ne 0 ]; then
    panic "usage: $(basename $0)"
elif ! cmd_found code; then
    echo "'code' not found"
    exit
fi

config_code=$HOME/.config/Code

if [ $(uname) = Darwin ]; then
    symlink \
        "$config_code" \
        "$HOME/Library/Application Support/Code"
fi

rm -rf \
    "$config_code/Backups" \
    "$config_code/Cache" \
    "$config_code/CachedData" \
    "$config_code/CachedExtensions" \
    "$config_code/GPUCache" \
    "$config_code/logs"
