#!/bin/sh

set -eu
. "$HOME/.config/lib/panic.sh"

if [ $# -ne 0 ]; then
	panic "usage: $(basename "$0")"
fi

cmd_exist() {
	command -v "$1" > /dev/null
}

if cmd_exist brew; then
	echo "doing 'brew'"
	brew update
	brew bundle --verbose --global
	brew bundle cleanup --force --global
	brew upgrade
	brew unlink coreutils > /dev/null
	brew cask cleanup
	brew cleanup
	brew prune
else
	echo "'brew' not installed"
fi

if cmd_exist tlmgr; then
	echo "doing 'tlmgr'"
	tlmgr update --self
	tlmgr update --all
else
	echo "'tlmgr' not installed"
fi

if cmd_exist npm; then
	echo "doing 'npm'"
	npm i -g npm
else
	echo "'npm' not installed"
fi
