#!/bin/sh

set -eu
. "$HOME/.config/lib/panic.sh"

if [ $# -ne 0 ]; then
	panic "usage: $(basename "$0")"
fi

echo "doing brew"
brew update
brew bundle --verbose --global
brew bundle cleanup --force --global
brew upgrade
brew cask cleanup
brew cleanup
brew prune
brew doctor || true

echo "doing tlmgr"
tlmgr update --self
tlmgr update --all

echo "doing npm"
npm i -g npm
