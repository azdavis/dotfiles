#!/bin/sh

. "$HOME/.config/lib/_base.sh"

if [ $# -ne 0 ]; then
    abort "usage: $(basename "$0")"
fi

cd "$HOME/.config/pkg"

echo "doing brew"
brew update
brew bundle --verbose
brew bundle cleanup --force
brew upgrade
brew cask cleanup
brew cleanup
brew prune
brew doctor || true

echo "doing tlmgr"
tlmgr update --self
tlmgr update --all
tlmgr install $(cat tlmgrfile)

echo "doing npm"
npm update -g
rm -rf "$HOME/.npm"
