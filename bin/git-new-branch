#!/bin/sh

set -eu

panic() {
    echo "$1" >&2
    exit 1
}

if [ "$#" -eq 0 ] || [ "$#" -gt 2 ]; then
    panic "usage: $(basename "$0") <branch> [<start-point>]"
fi

git rev-parse

branch="$1"
start="${2:-HEAD}"
git checkout -b "$branch" "$start"
git config "branch.$branch.remote" origin
git config "branch.$branch.merge" "refs/heads/$branch"
