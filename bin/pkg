#!/usr/bin/env zsh

source "$HOME/.config/misc/base.sh" || exit 1

cd "$HOME/.config/pkg"

which brew > /dev/null || curl -fsSL 'https://git.io/pVOl' | ruby

echo -n 'brew [yn]? ' && read x
if [[ "$x" == 'y' ]]; then
  brew update
  brew upgrade
  brew bundle --verbose
  brew bundle cleanup --force
  brew cask cleanup --force
  brew cleanup --force
  brew prune
  brew doctor || true
  brew cask doctor || true
fi

echo -n 'gem [yn]? ' && read x
if [[ "$x" == 'y' ]]; then
  gem install bundle
  bundle install
  bundle update
fi

echo -n 'npm [yn]? ' && read x
if [[ "$x" == 'y' ]]; then
  npm install -g $(cat Npmfile)
fi

echo -n 'tlmgr [yn]? ' && read x
if [[ "$x" == 'y' ]]; then
  tlmgr update --self
  tlmgr update --all
  tlmgr install $(cat Tlmgrfile)
fi

true
