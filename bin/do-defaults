#!/bin/sh

set -efu
IFS=

. $HOME/.config/lib/cmd_found.sh
. $HOME/.config/lib/panic.sh

if [ $# -ne 0 ]; then
    panic "usage: $(basename "$0")"
fi

if ! cmd_found "defaults"; then
    panic "'defaults' not found"
fi

alias dw="defaults write"

dw -g _HIHideMenuBar -bool true
dw -g ApplePressAndHoldEnabled -bool false
dw -g AppleShowAllExtensions -bool true
dw -g AppleShowScrollBars -string "WhenScrolling"
dw -g AppleWindowTabbingMode -string "always"
dw -g CGDisableCursorLocationMagnification -bool true
dw -g com.apple.springing.delay -float 0.5
dw -g com.apple.springing.enabled -bool true
dw -g InitialKeyRepeat -int 25
dw -g KeyRepeat -int 2
dw -g NSAutomaticQuoteSubstitutionEnabled -bool false
dw -g NSAutomaticSpellingCorrectionEnabled -bool false
dw -g NSAutomaticWindowAnimationsEnabled -bool false
dw -g NSCloseAlwaysConfirmsChanges -bool true
dw -g NSDisableAutomaticTermination -bool true
dw -g NSNavPanelExpandedStateForSaveMode -bool true
dw -g NSNavPanelExpandedStateForSaveMode2 -bool true
dw -g NSQuitAlwaysKeepsWindows -bool false
dw -g NSUseAnimatedFocusRing -bool false
dw -g NSWindowResizeTime -float 0.1
dw com.apple.desktopservices DSDontWriteNetworkStores -bool true
dw com.apple.dock autohide -bool true
dw com.apple.dock autohide-delay -int 9999
dw com.apple.dock launchanim -bool false
dw com.apple.dock magnification -bool false
dw com.apple.finder _FXSortFoldersFirst -bool true
dw com.apple.finder DisableAllAnimations -bool true
dw com.apple.finder FXEnableExtensionChangeWarning -bool false
dw com.apple.mail DisableInlineAttachmentViewing -bool true
dw com.apple.print.printingprefs "Quit When Finished" -bool true
dw com.apple.screencapture disable-shadow -bool true
dw com.apple.universalaccess reduceMotion -bool true
dw com.apple.universalaccess reduceTransparency -bool true

echo "relog for all changes to take effect"
