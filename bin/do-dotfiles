#!/usr/bin/env sh

. "$HOME/.config/etc/base.sh"

wd=".config/home"
cd "$HOME/$wd"

touch "$HOME/.hushlogin" "$HOME/.netrc"
chmod 600 "$HOME/.hushlogin" "$HOME/.netrc"

confirm() {
    local x
    printf "\e[33mconfirm:\e[0m $1? "
    read x < /dev/tty
    return $([ "$x" = y ])
}

for x in *; do
    dst="$HOME/.$x"
    if [ -e "$dst" ]; then
        if [ -L "$dst" ] || confirm "remove $dst"; then
            rm -rf "$dst"
        else
            continue
        fi
    fi
    ln -s "$wd/$x" "$dst"
done
